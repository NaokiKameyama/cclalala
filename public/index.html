<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/index.css">
    <title>cslalala</title>
    <!-- Load Stripe.js on your website. -->
    <script src="https://js.stripe.com/v3"></script>
  </head>
  <body>
    <div  class="top-message">
      Stripeの決済画面に移ります。(税込み10%)
    </div>

    <div class="payment-button-container">
      <button
        style="background-color:#6772E5;color:#FFF;padding:8px 12px;border:0;border-radius:4px;font-size:1em;cursor:pointer;"
        id="checkout-button-price_1IksZlALNRT3liRlaK0gvInn"
        role="link"
        type="button"
      >
        ビジネス会員プラン 月額330円
      </button>
      <br /><br />
      <button
        style="background-color:#6772E5;color:#FFF;padding:8px 12px;border:0;border-radius:4px;font-size:1em;cursor:pointer;"
        id="checkout-button-price_1IksZsALNRT3liRl4cto5JFQ"
        role="link"
        type="button"
      >
        ビジネスプロプラン 月額550円
      </button>
      <div id="error-message"></div>
    </div>

    <div class="payment-discription">
      決済は、毎月/自動引き落としとなります。<br />
      JCB/Visa/Masterがご利用いただけます。
    </div>

    <div class="inquiry-discription">
      決済後、各講師会員証画面に移りますので、ご確認くださいませ。万一、表示反映されていない場合は、恐れ入りますが、
      <a href="https://cc-lalala.jp/inquiry/">協会事務局</a>までご連絡くださいませ。<br />
      その他、不明な点などございましたら、<a href="https://cc-lalala.jp/lower/qanda.php">よくある質問欄</a>をご覧くださいませ。
    </div>

    <div class="attention-discription">
      <u>決済後の返金は行っておりません</u>ので、あらかじめご了承くださいませ。
      ビジネス登録を解約はいつでも行なえます。その場合、<u>サービス内容は、
      初期化され引き継がれませんので、ご注意くださいませ。</u>
    </div>

    <script>
    (function() {
      var stripe = Stripe('pk_live_51Ijdt6ALNRT3liRlcW8rQLGbi7J1M1TtQjuByETAcJBubwlbfBCqcx4TrEmk5YB73ZEYzYZRn0EguhsGoFJGDVdF00iAe7v6Os');

      var checkoutButton = document.getElementById('checkout-button-price_1IksZlALNRT3liRlaK0gvInn');
      checkoutButton.addEventListener('click', function () {
        /*
        * When the customer clicks on the button, redirect
        * them to Checkout.
        */
        stripe.redirectToCheckout({
          lineItems: [{price: 'price_1IksZlALNRT3liRlaK0gvInn', quantity: 1}],
          mode: 'subscription',
          /*
          * Do not rely on the redirect to the successUrl for fulfilling
          * purchases, customers may not always reach the success_url after
          * a successful payment.
          * Instead use one of the strategies described in
          * https://stripe.com/docs/payments/checkout/fulfill-orders
          */
          successUrl: 'https://cc-lalala.jp/account/?m=member_card_B',
          cancelUrl: 'https://cclalala-4d98e.web.app/',
        })
        .then(function (result) {
          if (result.error) {
            /*
            * If `redirectToCheckout` fails due to a browser or network
            * error, display the localized error message to your customer.
            */
            var displayError = document.getElementById('error-message');
            displayError.textContent = result.error.message;
          }
        });
      });


      var checkoutButton = document.getElementById('checkout-button-price_1IksZsALNRT3liRl4cto5JFQ');
      checkoutButton.addEventListener('click', function () {
        /*
        * When the customer clicks on the button, redirect
        * them to Checkout.
        */
        stripe.redirectToCheckout({
          lineItems: [{price: 'price_1IksZsALNRT3liRl4cto5JFQ', quantity: 1}],
          mode: 'subscription',
          /*
          * Do not rely on the redirect to the successUrl for fulfilling
          * purchases, customers may not always reach the success_url after
          * a successful payment.
          * Instead use one of the strategies described in
          * https://stripe.com/docs/payments/checkout/fulfill-orders
          */
          successUrl: 'https://cc-lalala.jp/account/?m=member_card_B',
          cancelUrl: 'https://cclalala-4d98e.web.app/',
        })
        .then(function (result) {
          if (result.error) {
            /*
            * If `redirectToCheckout` fails due to a browser or network
            * error, display the localized error message to your customer.
            */
            var displayError = document.getElementById('error-message');
            displayError.textContent = result.error.message;
          }
        });
      });
    })();
    </script>
  </body>
</html>
