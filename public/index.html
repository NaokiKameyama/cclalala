<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>cslalala</title>
  </head>
  <body>
    <p>
      定額決済ページ(テスト版)
    </p>
    <!-- Load Stripe.js on your website. -->
    <script src="https://js.stripe.com/v3"></script>

    <!-- Create a button that your customers click to complete their purchase. Customize the styling to suit your branding. -->
    <button
      style="background-color:#6772E5;color:#FFF;padding:8px 12px;border:0;border-radius:4px;font-size:1em;cursor:pointer;"
      id="checkout-button-price_1IkWMCALNRT3liRl05BhmdB7"
      role="link"
      type="button"
    >
      ビジネス会員プラン 月額330円
    </button>
    <br /><br />
    <button
      style="background-color:#6772E5;color:#FFF;padding:8px 12px;border:0;border-radius:4px;font-size:1em;cursor:pointer;"
      id="checkout-button-price_1IkWLBALNRT3liRlo6jRDehD"
      role="link"
      type="button"
    >
      ビジネスプロプラン 月額550円
    </button>

    <div id="error-message"></div>

    <script>
    (function() {
      var stripe = Stripe('pk_test_51Ijdt6ALNRT3liRlnHOjnxZT1or2DbUFZCAs1BpqNqvCwYzIdqHzVrtFnDM3bN8SOUHBTV1xxbLo8M1WVn91XMw000uLKFbrZc');

      var checkoutButton = document.getElementById('checkout-button-price_1IkWMCALNRT3liRl05BhmdB7');
      checkoutButton.addEventListener('click', function () {
        /*
        * When the customer clicks on the button, redirect
        * them to Checkout.
        */
        stripe.redirectToCheckout({
          lineItems: [{price: 'price_1IkWMCALNRT3liRl05BhmdB7', quantity: 1}],
          mode: 'subscription',
          /*
          * Do not rely on the redirect to the successUrl for fulfilling
          * purchases, customers may not always reach the success_url after
          * a successful payment.
          * Instead use one of the strategies described in
          * https://stripe.com/docs/payments/checkout/fulfill-orders
          */
          successUrl: 'https://www.cc-lalala.jp',
          cancelUrl: 'https://www.cc-lalala.jp',
        })
        .then(function (result) {
          if (result.error) {
            /*
            * If `redirectToCheckout` fails due to a browser or network
            * error, display the localized error message to your customer.
            */
            var displayError = document.getElementById('error-message');
            displayError.textContent = result.error.message;
          }
        });
      });


      var checkoutButton = document.getElementById('checkout-button-price_1IkWLBALNRT3liRlo6jRDehD');
      checkoutButton.addEventListener('click', function () {
        /*
        * When the customer clicks on the button, redirect
        * them to Checkout.
        */
        stripe.redirectToCheckout({
          lineItems: [{price: 'price_1IkWLBALNRT3liRlo6jRDehD', quantity: 1}],
          mode: 'subscription',
          /*
          * Do not rely on the redirect to the successUrl for fulfilling
          * purchases, customers may not always reach the success_url after
          * a successful payment.
          * Instead use one of the strategies described in
          * https://stripe.com/docs/payments/checkout/fulfill-orders
          */
          successUrl: 'https://www.cc-lalala.jp',
          cancelUrl: 'https://www.cc-lalala.jp',
        })
        .then(function (result) {
          if (result.error) {
            /*
            * If `redirectToCheckout` fails due to a browser or network
            * error, display the localized error message to your customer.
            */
            var displayError = document.getElementById('error-message');
            displayError.textContent = result.error.message;
          }
        });
      });
    })();
    </script>
  </body>
</html>
